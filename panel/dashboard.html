<section id="content">
	<section class="hbox stretch">
		<section>
			<section class="vbox">
				<section class="scrollable padder">
					<div class="row m-b-md">
	                    <div class="col-sm-4">
	                      <h3 class="col-xs-12 m-b-xs text-black ng-binding"> 
  								<i style="color: rgb(0, 160, 172); font-size: 25px;" class="i i-statistics i-2x text-info-lt"></i>
 								{{dictionary.menu.dashboard[lang]}}
							</h3>
	                    </div>
	                </div>
                 	<div class="row">
                 		<div class="col-md-4">
                 			<!-- Módulo de registro de pacientes -->
                 			<span ng-if="user.type == 1 || user.type == 2">
                 			<div class="row">
                 				<div class="col-xs-12">
			                      <section class="panel panel-success b-a">
			                        <div class="panel-heading b-b">
			                          <a class="font-bold">{{dashboard.registro[lang]}}</a>
			                        </div>
			                        <div class="panel-body">
				                      <form name="registro" novalidate>
				                      	<div class="form-group">
				                      		<label>{{dictionary.fields.name[lang]}}*</label>
											<input ng-model="paciente.nombre" type="text" name="name" required class="form-control">
											<div ng-show="registro.name.$touched && !registro.$pristine">
												<span ng-show="registro.name.$error.required" class="alert">{{dictionary.alerts.required[lang]}}</span>
											</div>
										</div>
										<div class="form-group">
				                      		<label>{{dictionary.fields.surname[lang]}}*</label>
											<input ng-model="paciente.apellidos" type="text" name="surname" required class="form-control">
											<div ng-show="registro.surname.$touched && !registro.$pristine">
												<span ng-show="registro.surname.$error.required" class="alert">{{dictionary.alerts.required[lang]}}</span>
											</div>
										</div>
										<div class="form-group">
											<div class="row">
												<div class="col-sm-6">
													<label>{{dictionary.fields.mail[lang]}}*</label>
													<input ng-model="paciente.email" type="email" name="mail" required class="form-control">
													<div ng-show="registro.mail.$touched && !registro.$pristine">
														<span ng-show="registro.mail.$error.required" class="alert">{{dictionary.alerts.required[lang]}}</span>
														<span ng-show="registro.mail.$error.email" class="alert">{{dictionary.alerts.mailpattern[lang]}}</span>
													</div>
												</div>
												<div class="col-sm-6">
													<label>{{dictionary.fields.telf[lang]}}*</label>
													<input ng-model="paciente.telf" type="text" name="telf" ng-pattern="/^((\+?34([ \t|\-])?)?[9|6|7]((\d{1}([ \t|\-])?[0-9]{3})|(\d{2}([ \t|\-])?[0-9]{2}))([ \t|\-])?[0-9]{2}([ \t|\-])?[0-9]{2})$/" required class="form-control">
													<div ng-show="registro.telf.$touched && !registro.$pristine">
														<span ng-show="registro.telf.$error.required" class="alert">{{dictionary.alerts.required[lang]}}</span>
														<span ng-show="registro.telf.$error.pattern" class="alert">{{dictionary.alerts.pattern[lang]}}</span>
													</div>
												</div>
											</div>
										</div>
										<div class="form-group">
											<div class="row">
												<div class="col-sm-4">
													<label>{{dictionary.fields.cp[lang]}}</label>
													<input ng-model="paciente.cp" type="text" name="cp" class="form-control">
												</div>
												<div class="col-sm-4">
													<label>{{dictionary.fields.city[lang]}}</label>
													<input ng-model="paciente.provincia" type="text" name="city" class="form-control">
												</div>
												<div class="col-sm-4">
													<label>{{dictionary.fields.country[lang]}}</label>
													<input ng-model="paciente.pais" type="text" name="country" class="form-control">
												</div>
											</div>
										</div>
										<div class="form-group">
				                      		<label>{{dictionary.fields.direction[lang]}}</label>
											<input ng-model="paciente.direccion" type="text" name="direction" class="form-control">
										</div>
										<div class="form-group">
											<div class="row">
												<div class="col-sm-6">
													<label>{{dictionary.fields.language[lang]}}</label>
													<select ng-model="paciente.lang" class="form-control m-b">
														<option value="es" selected>Español</option>
														<option value="en" selected>Inglés</option>
														<!-- <option value="de" selected>Alemán</option> -->
													</select>
												</div>
											</div>
										</div>
										<div class="form-group">
											<div class="row">
												<div class="col-sm-6">
													<label>{{dictionary.fields.via[lang]}}</label>
													<input ng-model="paciente.via" type="text" name="via" class="form-control">
												</div>
												<div class="col-sm-6">
													<label>{{dictionary.fields.conocido[lang]}}</label>
													<input ng-model="paciente.conocido" type="text" name="conocido" class="form-control">
												</div>
											</div>
										</div>
										<div class="form-group">
											<label>{{dictionary.fields.treatment[lang]}}</label>
											<input ng-model="paciente.tratamiento" type="text" name="treatment" class="form-control">
										</div>
										<div class="form-group">
											<label>{{dictionary.fields.team[lang]}}</label>
											<input ng-model="paciente.equipo" type="text" name="team" class="form-control">
										</div>
				                        <input type="submit" class="btn btn-sm btn-default" ng-click="insertPatient()" ng-disabled="!registro.$valid" value="{{dashboard.patient_register[lang]}}">
				                      </form>
				                    </div>
			                      </section>
			                    </div>
		                   </div>
		                   </span>
		                   <!-- / Módulo de registro de pacientes -->
		                   
		                   <!-- Módulo de subida de archivos -->
		                   <span ng-if="user.type == 0">
								<div class="col-xs-12">
									<section class="panel panel-success b-a">
				                        <div class="panel-heading b-b">
				                          <a class="font-bold">{{dashboard.form_upload.title[lang]}}</a>
				                        </div>
				                        <div class="panel-body">
					                      <form role="form" name="archivos" novalidate enctype="multipart/form-data">
					                        <div class="form-group">
					                          <label>{{dashboard.form_upload.name[lang]}}*</label>
					                          <!-- Este input limita los caracteres permitidos del nombre de archivo -->
					                          <!-- <input type="text" name="nombre" ng-model="archivo.nombre" class="form-control" required ng-pattern="/^[a-zA-Z]*$/"> -->
					                          <input type="text" name="nombre" ng-model="archivo.nombre" class="form-control" required>
					                          <div ng-show="archivos.nombre.$touched && !registro.$pristine">
												  <span ng-show="archivos.nombre.$error.required" class="alert">{{dictionary.alerts.required[lang]}}</span>
												  <span ng-show="archivos.nombre.$error.pattern" class="alert">{{dictionary.alerts.pattern[lang]}}</span>
											  </div>
					                        </div>
					                        <div class="form-group">	
					                        	<input type="file" id="miarchivo" fileread="fileread">
												<!-- <input id="filestyle-0" file-model="myfile" class="filestyle" type="file" ng-model="file.archivo" name="archivo" data-classinput="form-control inline v-middle input-s" data-classbutton="btn btn-default" data-icon="false" style="position: fixed; left: -500px;"> -->
					                        </div>
					                        <button type="submit" class="btn btn-sm btn-default" ng-click="uploadArchivo(file)" ng-disabled="!archivos.$valid">{{dashboard.form_upload.button[lang]}}</button>
					                      </form>
					                      <div class="line line-dashed b-b line-lg pull-in"></div>
					                      <ul class="list-group list-group-lg no-bg auto">                          
					                          <span class="list-group-item clearfix" ng-repeat="arch in ficheros">
					                            <span class="clear">
					                              <span class="pull-right m-r-sm">
					                              	<a href="{{arch.url}}" target="_blank"><i class="fa fa-cloud-download text btn"></i></a>
					                              	<i ng-click="eraseFile(arch.id_documentation)" class="fa fa-times text btn"></i> 
					                              </span>
					                              <span class="not-read">{{arch.nombre}}</span>
					                              <br><small>{{arch.fecha}}</small>
					                            </span>
					                          </span>
					                      </ul>
					                    </div>
				                    </section>
								</div>
							</span>
							<!-- Módulo de subida de archivos -->
		                   
	                    </div>
	                    
	                    <span>
                 		<div class="col-md-4">
	                    
		                    <!-- Módulo de alta de admins -->
		                    <div ng-if="user.type == 2" class="row">
		                    	<div class="col-xs-12">
		                    		<section class="panel panel-success b-a">
				                        <div class="panel-heading b-b">
				                          <a class="font-bold">{{dashboard.admins[lang]}}</a>
				                        </div>
				                        <div class="panel-body">
					                        <form ng-show="form_admins" role="form" name="registroAdmin" novalidate>
						                      	<div class="form-group">
						                      		<label>{{dictionary.fields.name[lang]}}*</label>
													<input ng-model="admin.name" type="text" name="name" required class="form-control">
													<div ng-show="registroAdmin.name.$touched && !registroAdmin.$pristine">
														<span ng-show="registroAdmin.name.$error.required" class="alert">{{dictionary.alerts.required[lang]}}</span>
													</div>
												</div>
												<div class="form-group">
													<label>{{dictionary.fields.user[lang]}}*</label>
													<input ng-model="admin.mail" type="email" name="mail" required class="form-control">
													<div ng-show="registroAdmin.mail.$touched && !registroAdmin.$pristine">
														<span ng-show="registroAdmin.mail.$error.required" class="alert">{{dictionary.alerts.required[lang]}}</span>
														<span ng-show="registroAdmin.mail.$error.email" class="alert">{{dictionary.alerts.mailpattern[lang]}}</span>
													</div>
												</div>
						                        <button type="submit" class="btn btn-sm btn-default" ng-click="insertAdmin()" ng-disabled="!registroAdmin.$valid">{{dashboard.admin_register[lang]}}</button>
					                        </form>
					                        <form ng-hide="form_admins" role="form" name="editarAdministrador" novalidate>
					                        	<span class="pull-right m-r-sm"><i ng-click="showEditAdmin(0, 1)" class="fa fa-times text btn"></i></span>
												<div class="form-group">
													<label>{{dictionary.fields.pass[lang]}}*</label>
													<input ng-model="readmin.pass" type="text" name="pass" required class="form-control">
													<div ng-show="readmin.pass.$touched && !readmin.$pristine">
														<span ng-show="readmin.pass.$error.required" class="alert">{{dictionary.alerts.required[lang]}}</span>
													</div>
												</div>
												<input type="hidden" name="id_admin" ng-model="readmin.admin">
						                        <button type="submit" class="btn btn-sm btn-default" ng-click="editAdmin()" ng-disabled="!editarAdministrador.$valid">{{dashboard.admin_edit[lang]}}</button>
					                        </form>
					                        <div class="line line-dashed b-b line-lg pull-in"></div>
					                        <ul class="list-group list-group-lg no-bg auto">                          
					                          <span class="list-group-item clearfix" ng-repeat="administradores in admins">
					                            <span class="clear">
					                              <span class="pull-right m-r-sm">
					                              	<i ng-click="showEditAdmin(administradores.id_admin, 0)" class="fa fa-pencil-square-o text btn"></i>
					                              	<i ng-click="eraseAdmin(administradores.id_admin)" class="fa fa-times text btn"></i> 
					                              </span>
					                              <span class="not-read">{{administradores.nombre}}</span>
					                            </span>
					                          </span>
					                        </ul>
					                    </div>
				                    </section>
		                    	</div>
		                    </div>
		                    <!-- / Módulo de alta de admins -->
                 		
                 			
	                    	<!-- Módulo de Mensajes -->
                 			<div ng-if="user.type == 0 || user.type == 1" class="row">
			                   <div class="col-xs-12">
			                      <section class="panel panel-success b-a">
			                        <div class="panel-heading b-b">
			                          <span class="badge bg-warning pull-right">{{num_msgs}}</span>
			                          <a href="#messages" class="font-bold">{{dashboard.messages[lang]}}</a>
			                        </div>
			                        <div class="panel-body" ng-if="num_msgs == 0">
									  <h3 style="text-align:center;">{{dashboard.without_messages[lang]}}</h3>
									  <label ng-if="user.type == 0" style="text-align: center; display: inline-block; width: 100%;">{{dashboard.send_message_doctor[lang]}} <a href="#messages" style="color: rgb(0, 160, 172); font-weight: bold;"><i class="i i-mail text-primary-lt"></i></a>.</label>
									
									</div>
			                        <ul class="list-group list-group-lg no-bg auto">                          
			                          <a ng-repeat="mensaje in msg" href="#messages" class="list-group-item clearfix">
			                            <span class="clear">
			                              <span class="not-read">{{mensaje.nombre+' '+mensaje.apellidos}}</span>
			                              <small class="text-muted clear text-ellipsis">{{mensaje.asunto}}</small>
			                            </span>
			                          </a>
			                        </ul>
			                      </section>
			                   </div>
		                    </div>
	                   		<!-- / Módulo de mensajes -->
		                    
		                    <!-- Módulo últimos ficheros -->
                 			<div class="row" ng-if="user.type != 0">
			                   <div class="col-xs-12">
			                   		<section class="panel panel-success b-a">
				                        <div class="panel-heading b-b">
				                          <a class="font-bold">{{dashboard.last_files[lang]}}</a>
				                        </div>
				                        <div class="panel-body">
					                      <ul class="list-group list-group-lg no-bg auto">                          
					                          <span class="list-group-item clearfix" ng-repeat="arch in ficheros">
					                            <span class="clear">
					                              <span class="pull-right m-r-sm">
					                              	<a href="{{arch.url}}" target="_blank"><i class="fa fa-cloud-download text btn"></i></a>
					                              	<i ng-click="eraseFile(arch.id_documentation)" class="fa fa-times text btn"></i> 
					                              </span>
					                              <span class="not-read">{{arch.nombre}}</span>
					                              <br><small>{{arch.fecha}}</small>
					                              <br><small>{{arch.remitente}}</small>
					                            </span>
					                          </span>
					                      </ul>
					                    </div>
				                    </section>
			                   </div>
			                </div>
			                <!-- / Módulo últimos ficheros -->
			                
	                    </div>
	                    </span>
	                    
	                    <!-- Módulo de calendario -->
	                    <div class="col-md-4">
	                      <section class="panel panel-success b-light">
	                        <header class="panel-heading"><a href="#calendar" class="font-bold">{{dashboard.calendar[lang]}}</a></header>
	                        <div id="calendar" class="bg-light dker m-l-n-xxs m-r-n-xxs"></div>
	                        <div class="list-group">
	                          <header class="panel-heading"><strong>{{dashboard.next_citas[lang]}}</strong></header>
	                          <a ng-repeat="cita in nextCitas" class="list-group-item text-ellipsis">
	                            <span class="badge bg-warning">{{cita.fecha}}</span> 
	                            {{cita.titulo}}
	                          </a>
	                        </div>
	                      </section>                  
	                    </div>
	                    <!-- / Módulo de calendario -->
	                    
                 	  </div>
                 </section>
                </section>
               </section>
             </section>
             <a class="hide nav-off-screen-block" data-toggle="class:nav-off-screen" data-target="#nav"></a>
            </section>
            
            <script src="js/calendar/bootstrap_calendar.js"></script>
    		<!-- <script src="js/calendar/demo.js"></script> -->